<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Food Order Restaurant</title>
  <link rel="stylesheet" href="../css/style.css" type="text/css">
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>

  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
    integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

</head>

<body onload="onLoadAll()" style="
background-color: #f2f2f2;
">

  <div class="container-fluid p-0"
    style="background: url(../assets/background.jpg) no-repeat; background-size: cover; height: calc(100vh);">
    <p class="main-content-title">Your Favorite Food<br>Delivered Hot &<br>Fresh</p>

    <p class="main-content-paragraph">Serve your food with the quickest method we ever had. With our top selection of
      the best chef around the world, <br>
      you can consume your food with a great taste and easy method.<br>
    </p>

    <a href="#listFoodHome"><button class="main-content-button">Order Now</button></a>
    <nav id="menu" class="main-content-nav">
      <input type="checkbox" id="check">
      <label for="check" class="checkBtn">
        <i class="fas fa-bars"></i>
      </label>
      <label class="logo">Foolicious</label>

      <ul>
        <li><a onclick="homePage()" class="active text-white">Home</a></li>

        <li><a data-toggle="modal" data-target=".orderCart">List Stock<div
              style="width: 20px;height: 20px;background: #fb9200;position: absolute;top: 25px;margin-left: 80px;border-radius: 50%">
              <p id="orderNumber"
                style="position: absolute;margin-top: -30px;margin-left: 7px;color: #fff;font-size: 80%">0</p>
            </div> </a></li>

        <li><a id="menuLoginBtn" data-toggle="modal" data-target=".login">Log In</a></li>
        <li><a id="menuAccountLogin" class="menuAccountHide" style="display: none;"></a></li>
      </ul>

      <div id="menuLogout">
        <div id="menu_header22" class="khung p-3 logoutMenu">

          <p id="helloUser" class="text-black" style="opacity: 0.9; font-weight: bold;"></p>
          <div id="quanlydon" class="box p-1 quanlydonn">
            <a href="dashboard.html">
              <p style="font-size: 14px; cursor: pointer;"><i class="fa fa-id-card-o text-white mr-3"
                  aria-hidden="true"></i>Manage</p>

            </a>
          </div>
          <div class="box p-1" data-toggle="modal" data-target=".bd-example-modal-lg22">
            <p style="font-size: 14px; cursor: pointer;"><i class="fa fa-list-alt text-white mr-3"
                aria-hidden="true"></i>My application
            </p>
          </div>
          <div class="box p-1" data-toggle="modal" data-target=".bd-example-modal-sm33" style="height: 35px">
            <p style="font-size: 14px; cursor: pointer;"><i class="fa fa-key text-white mr-3" aria-hidden="true"
                style="font-size: 16px; cursor: pointer;"></i>Change Password</p>
          </div>

          <div class="box p-1" style="height: 35px;">
            <p onclick="LogOut()" style="font-size: 14px;"><i class="fa fa-sign-out text-white mr-3"
                aria-hidden="true"></i>Log Out
            </p>
          </div>
        </div>
      </div>
    </nav>
  </div>


  <div class="modal fade bd-example-modal-lg22" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel"
    aria-hidden="true">

    <div class="modal-dialog modal-lg">

      <div class="modal-content p-3" style="width: 150%; left: -200px;">

        <p class="font-weight-bold" style="font-size: 110%">My order</p>

        <div data-spy="scroll" data-target="#myScrollspy" data-offset="10" class="customerTable">
          <table class="table table-borderless">


            <thead>
              <tr>
                <th scope="col" style="width: 20%; font-size: 115%;">Customer name</th>
                <th scope="col" style="width: 44%; font-size: 115%;" class="text-center">Dish</th>
                <th scope="col" style="width: 18%; font-size: 115%;" class="text-center">Total money</th>
                <th scope="col" style="width: 18%; font-size: 115%;" class="text-center">Status</th>
              </tr>
            </thead>

            <tbody id="printPaymentUser">

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>




  <div class="modal fade bd-example-modal-sm33 mt-5" tabindex="-1" role="dialog" aria-labelledby="smallModalLabel33"
    aria-hidden="true" style="padding-right: 2%">

    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="iconpopup popups">
        </div>

        <div id="changePass" class="iconpopup mt-4 changePasswordField">
          <p class="text-center mb-3 passwordChangerHeader">Change Password</p>
          <p class="mt-3" style="margin-bottom: 2%; font-weight: bold;">Old password:</p>
          <input type="password" name="pass" id="currentPass" class="form-control"
            placeholder="Enter your old password">
          <p class="mt-1" style="margin-bottom: 2%; font-weight: bold;">New Password</p>
          <input type="password" name="pass" id="newPass" class="form-control" placeholder="Enter your new password">
          <p class="mt-1" style="margin-bottom: 2%; font-weight: bold;">Confirm New Password:</p>
          <input type="password" name="pass" id="confNewPass" class="form-control"
            placeholder="Re enter your new password">
          <p id="notificationChangePass" class="mt-4 text-center mb-0" style="font-size: 90%; color: red;"></p>
          <button class="btn btn-warning float-right mt-3" onclick="changePassword()">Change</button>
        </div>
      </div>
    </div>
  </div>



  <!-- Login / Sign Up -->
  <div class="modal fade login mt-5" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel" aria-modal="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">

        <div class="cart-box" style="width: 100%; margin: auto;">
          <div class="login_img_box float-left modal-content-asset">
            <img src="../assets/loginImage.jpg" width="100%" height="100%">
          </div>

          <div id="loginBox">
            <div class="login-info-box float-right p-5" style="width: 50%; height: 450px;">
              <p class="text-center font-weight-bold" style="font-size: 140%;">Login</p>
              <label class="font-weight-bold mt-3">Username</label>
              <input id="userLogin" type="text" placeholder="Enter your username" class="form-control"
                aria-describedby="emailHelp">
              <label class="mt-3 font-weight-bold">Password</label>
              <input id="passLogin" type="password" placeholder="Enter your password" class="form-control"
                aria-describedby="emailHelp">
              <button onclick="Login()" class="btn btn-primary mt-4 loginBtn">Login</button>
              <p id="loginStatus" class="text-center mt-4" style="font-size: 90%; color: red;"></p>
              <p onclick="moveSignup()" class="text-center mt-3" style="font-size: 90%;">Don't have an account? <strong
                  style="color: #fb9200; cursor: pointer;">Sign Up</strong></p>
            </div>
          </div>

          <div id="signUpBox" style="display: none;">
            <div class="signup-info-box float-right p-4 pl-5 pr-5" style="width: 50%; height: 450px;">
              <p class="text-center font-weight-bold" style="font-size: 140%">Register</p>
              <label class="font-weight-bold mt-1">Username</label>
              <input id="userSignUp" type="text" placeholder="Enter your username" style="outline: none;"
                class="form-control" aria-describedby="emailHelp">
              <label class="mt-3 font-weight-bold">Password</label>
              <input id="passSignUp" type="password" placeholder="Enter your password" class="form-control"
                aria-describedby="emailHelp">
              <label class="mt-3 font-weight-bold">Confirm Password</label>
              <input id="confirmPassSignUp" type="password" placeholder="Enter your password" class="form-control"
                aria-describedby="emailHelp">
              <button onclick="SignUp()" class="btn btn-primary mt-4 signUpBtn">Sign Up</button>
              <p id="signUpStatus" class="text-center mt-3 mb-1" style="font-size: 90%; color: red;"></p>
              <p onclick="moveLogin()" class="text-center mt-0" style="font-size: 90%;">Do you have an account? <strong
                  style="color: #fb9200; cursor: pointer;">Log In</strong></p>
            </div>
          </div>
          <div style="clear: both"></div>
        </div>

      </div>
    </div>
  </div>

  <!-- Cart -->
  <div class="modal fade orderCart mt-3" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">

        <div id="checkoutForm" class="cart-box pl-5 pt-4 shadow-sm mt-3 pb-4" style="width: 100%; margin: auto;">
          <p class="ml-2" style="font-size: 130%; font-weight: bold;">My Cart</p>
          <div data-spy="scroll" data-target="#myScrollspy" data-offset="10"
            class="cartContentBox">
            <table class="table table-borderless">
              <thead>
                <tr>
                  <th scope="col" style="width: 40%; font-size: 115%;">Product</th>
                  <th scope="col" style="width: 20%; font-size: 115%;" class="text-center">Amount</th>
                  <th scope="col" style="width: 20%; font-size: 115%;" class="text-center">Cost of Money</th>
                  <th scope="col" style="width: 20%; font-size: 115%;" class="text-center">Manipulation</th>
                </tr>
              </thead>
              <tbody id="print_order_cart">

              </tbody>
            </table>
          </div>
          <div class="float-left pl-2" style="width: 30%;">

            <p class="font-weight-bold" style="font-size: 115%;">Total</p>
          </div>
          <div class="float-right pr-5" style="width: 30%;">
            <p id="totalMoney" class="font-wieght-bold float-right mt-2" style="font-size: 115%;"> </p>
          </div>
          <div style="clear: both;"></div>
          <div onclick="checkout()" class="btn mr-5 text-white float-right"
            style="background: #fb9200; cursor: pointer;">
            Payment
          </div>
          <div style="clear: both;"></div>
        </div>


        <div id="paymentForm" class="p-5" style="width: 100%;height: 400px;display: none;">
          <div class="choose-box float-left" style="width: 60%;">
            <p class="font-weight-bold" style="font-size: 130%;">Payment</p>
            <p class="mb-2 font-weight-bold">Choose Payments</p>
            <div class="payment-choose-box" style="width: 60%">
              <div class="float-left pr-1 pb-1" style="width: 50%;height: 80px;">
                <img onclick="mandiriBank()" class="paymentMandiriBank" src="../assets/bank/mandiri.jpg" width="100%"
                  height="100%" style="border: 1px solid #d7d7d7;">
              </div>
              <div class="float-right pr-1 pb-1" style="width: 50%;height: 80px;">
                <img onclick="bcaBank()" class="paymentBcaBank" src="../assets/bank/bca.png" width="100%" height="100%"
                  style="border: 1px solid #d7d7d7;">
              </div>
              <div class="float-left pr-1 pb-1" style="width: 50%;height: 80px;">
                <img onclick="briBank()" class="paymentBriBank" src="../assets/bank/bri.png" width="100%" height="100%"
                  style="border: 1px solid #d7d7d7;">
              </div>
              <div class="float-right pr-1 pb-1" style="width: 50%;height: 80px;">
                <img onclick="bniBank()" class="paymentBniBank pl-3 pr-3" src="../assets/bank/bni.png" width="100%"
                  height="100%" style="border: 1px solid #d7d7d7;">
              </div>
              <div style="clear: both;"></div>
            </div>
          </div>

          <!-- User info form -->
          <div class="choose-box p-3 float-right" style="width: 40%;height: 100px;">
            <label for="exampleInputEmail1">Recipient's Name</label>
            <input id="customerName" type="text" placeholder="Enter your name" class="form-control"
              id="exampleInputEmail1" aria-describedby="emailHelp">
            <label for="exampleInputEmail1" class="mt-3">Phone Number</label>
            <input id="customerPhone" type="tel" placeholder="Enter your phone number"
               class="form-control" id="exampleInputEmail1"
              aria-describedby="emailHelp">
            <label for="exampleInputEmail1" class="mt-3">Address</label>
            <input id="customerAddress" type="text" placeholder="Enter your address" class="form-control"
              id="exampleInputEmail1" aria-describedby="emailHelp">
            <button onclick="payment()" class="btn btn-primary float-right mt-3">Order</button>
          </div>
        </div>

      </div>
    </div>
  </div>




  <div style="
    background-color: #8e8a8a;
">
    <h2 style="
      color: white;
      text-align: center;">MENU</h2>
  </div>


  <!-- Food Order List  -->
  <div id="listFoodHome" class="container">
    <div class="row" id="printFood">

    </div>
  </div>

  <script type="text/javascript">
    $(document).ready(function () {
      $(".paymentMandiriBank").click(function () {
        $(".paymentMandiriBank").css("border", "2px solid #2195f3");
        $(".paymentBcaBank").css("border", "1px solid #d7d7d7");
        $(".paymentBriBank").css("border", "1px solid #d7d7d7");
        $(".paymentBniBank").css("border", "1px solid #d7d7d7");
      });
    });

    $(document).ready(function () {
      $(".paymentBcaBank").click(function () {
        $(".paymentBcaBank").css("border", "2px solid #2195f3");
        $(".paymentMandiriBank").css("border", "1px solid #d7d7d7");
        $(".paymentBriBank").css("border", "1px solid #d7d7d7");
        $(".paymentBniBank").css("border", "1px solid #d7d7d7");
      });
    });

    $(document).ready(function () {
      $(".paymentBriBank").click(function () {
        $(".paymentBriBank").css("border", "2px solid #2195f3");
        $(".paymentBcaBank").css("border", "1px solid #d7d7d7");
        $(".paymentMandiriBank").css("border", "1px solid #d7d7d7");
        $(".paymentBniBank").css("border", "1px solid #d7d7d7");
      });
    });

    $(document).ready(function () {
      $(".paymentBniBank").click(function () {
        $(".paymentBniBank").css("border", "2px solid #2195f3");
        $(".paymentBcaBank").css("border", "1px solid #d7d7d7");
        $(".paymentBriBank").css("border", "1px solid #d7d7d7");
        $(".paymentMandiriBank").css("border", "1px solid #d7d7d7");
      });
    });</script>


  <script>
    window.onscroll = function () {
      myFunction();
    };

    function myFunction() {
      if (
        document.body.scrollTop > 100 ||
        document.documentElement.scrollTop > 120
      ) {

        document.getElementById("menu").className = "scroll_event_Add_class";
      } else {
        document.getElementById("menu").className = "";
      }
    }

  </script>

  <script type="text/javascript">
    function moveLogin() {
      document.getElementById("loginBox").style.display = "block";
      document.getElementById("signUpBox").style.display = "none";
    }

    function moveSignup() {
      document.getElementById("loginBox").style.display = "none";
      document.getElementById("signUpBox").style.display = "block";
    }

    $(document).ready(function () {
      $("#menuAccountLogin").on("click", function () {
        $(".khung").toggleClass("menuAccountShow");
      });
    });

    function checkout() {
      document.getElementById("paymentForm").style.display = "block";
      document.getElementById("checkoutForm").style.display = "none";
    }

    var bank;
    function mandiriBank() {
      bank = "Mandiri";
    }
    function bcaBank() {
      bank = "BCA";
    }
    function briBank() {
      bank = "BRI";
    }
    function bniBank() {
      bank = "BNI";
    }

    function webManagement() {

      document.getElementById("listFoodHome").style.display = "none";
      document.getElementById("foodManagement").style.display = "block";
    }

    function homePage() {
      document.getElementById("listFoodHome").style.display = "block";
      document.getElementById("foodManagement").style.display = "none";
      listFood();
    }
  </script>

  <script type="text/javascript">
    var idOrderFood = JSON.parse(localStorage.getItem("idOrderFood"));
    if (idOrderFood === null) {
      idOrderFood = [];
      var idOrderFood = 0;
      localStorage.setItem("idOrderFood", JSON.stringify(idOrderFood));
    }

    var commentCustomer = JSON.parse(localStorage.getItem("commentCustomer"));
    if (commentCustomer === null) {
      commentCustomer = [];
      var commentCustomer = [{}];
      localStorage.setItem("commentCustomer", JSON.stringify(commentCustomer));
    }

    var paymentID = JSON.parse(localStorage.getItem("paymentID"));
    if (paymentID === null) {
      paymentID = [];
      var paymentID = 0;
      localStorage.setItem("paymentID", JSON.stringify(paymentID));
    }

    var idup = JSON.parse(localStorage.getItem("idup"));
    if (idup === null) {
      idup = [];
      var idup = 3;
      localStorage.setItem("idup", JSON.stringify(idup));
    }

    var checkInfo = JSON.parse(localStorage.getItem("checkInfo"));
    if (checkInfo === null) {
      checkInfo = [];
      var checkInfo = 0;
      localStorage.setItem("checkInfo", JSON.stringify(checkInfo));
    }

    var food = JSON.parse(localStorage.getItem("food"));
    if (food === null) {
      food = [];
    }

    var account = JSON.parse(localStorage.getItem("account"));
    if (account === null) {
      account = [];
      var account = [
        {
          //user generated
          id: 0,
          username: "admin",
          password: "123456",
          level: 1, //admin level
          role: "admin"
        },
        {
          id: 1,
          username: "Cryxero",
          password: "alphanum19",
          level: 0,
          role: "member"
        },
        {
          id: 2,
          username: "Spiderboy",
          password: "avenger5",
          level: 0,
          role: "member"
        },
      ];
      localStorage.setItem("account", JSON.stringify(account));
    }

    var food = JSON.parse(localStorage.getItem("food"));
    if (food === null) {
      food = [];
      food = [
        {
          id: 0,
          name: "Grilled lamb thighs",
          price: "90000",
          note: "Grilled lamb thighs with onion and some spices",
          image:
            "../assets/foodMenu/grilled_lamb_thights.jpg",
        },
        {
          id: 1,
          name: "Fried chicken combo",
          price: "50000",
          note: "Includes 2 wings and 2 chicken thighs",
          image:
            "../assets/foodMenu/fried_chicken_combo.jpg",
        },
        {
          id: 2,
          name: "Roasted duck",
          price: "130000",
          note: "A duck spreads 2 wings",
          image:
            "../assets/foodMenu/roasted_duck.jpg",
        },
        {
          id: 3,
          name: "Salmon sushi",
          price: "90000",
          note: "Salmon and a few other seafood",
          image:
            "../assets/foodMenu/sushi.jpg",
        },
        {
          id: 4,
          name: "Bean vermicelli",
          price: "50000",
          note: "Noodles with shrimp paste and vegetables",
          image:
            "../assets/foodMenu/bean_vermicelli.jpg",
        },
        {
          id: 5,
          name: "Deep-fried shrimp",
          price: "60000",
          note: "No matter whether it is winter or summer",
          image:
            "../assets/foodMenu/deep_fried_shrimp.jpg",
        },
        {
          id: 6,
          name: "King crab",
          price: "300000",
          note: "Regardless of whether it is winter or summer, Xuas restaurant",
          image:
            "../assets/foodMenu/king_crab.jpg",
        },
        {
          id: 7,
          name: "Grilled goat BBQ",
          price: "25000",
          note: "Regardless of whether it is winter or summer, Xuas restaurant",
          image:
            "../assets/foodMenu/grilled_goat_bbq.jpg",
        },
        {
          id: 8,
          name: "Grilled Chicken",
          price: "75000",
          note: "Filled the warmest in the belly while eating",
          image:
            "../assets/foodMenu/grilled_chicken.jpg",
        },
        {
          id: 9,
          name: "Wagyu Meat",
          price: "50000",
          note: "We've packed you the best meat in town",
          image:
            "../assets/foodMenu/wagyu_meat.jpg",
        },
      ];
      localStorage.setItem("food", JSON.stringify(food));
    }

    var orderFood = JSON.parse(localStorage.getItem("orderFood"));
    if (orderFood === null) {
      orderFood = [{}];
      localStorage.setItem("orderFood", JSON.stringify(orderFood));
    }

    var accountInfo = JSON.parse(localStorage.getItem("accountInfo"));
    if (accountInfo === null) {
      accountInfo = [];
      var accountInfo = [{}];
      localStorage.setItem("accountInfo", JSON.stringify(accountInfo));
    }

    var checkLogin = JSON.parse(localStorage.getItem('checkLogin'));
    if (checkLogin === null) {
      checkLogin = [];
      var checkLogin = -1;
      localStorage.setItem("checkLogin", JSON.stringify(checkLogin));
    }

    console.log(account[checkLogin].level);
    if (checkLogin == -1) {

    } else if (account[checkLogin].level == 0) {
      document.getElementById("loginStatus").innerHTML = "Logged in successfully";
      document.getElementById("menuAccountLogin").innerHTML =
        account[checkLogin].username;
      document.getElementById("menuAccountLogin").style.display = "block";
      document.getElementById("menuLoginBtn").style.display = "none";
      document.getElementById("helloUser").innerHTML =
        "Hello " + account[checkLogin].username + " !";
      document.getElementById("menuLogout").style.display = "block";
      document.getElementById("quanlydon").style.display = "none";
      printOrderCart();
      demOrder();
    } else if (account[checkLogin].level == 1) {
      document.getElementById("loginStatus").innerHTML = "Logged in successfully for Admin";
      document.getElementById("menuAccountLogin").innerHTML =
        account[checkLogin].username;
      document.getElementById("menuAccountLogin").style.display = "block";
      document.getElementById("menuLoginBtn").style.display = "none";
      document.getElementById("helloUser").innerHTML =
        "Hello " + account[checkLogin].username + " !";
      document.getElementById("menuLogout").style.display = "block";
      document.getElementById("quanlydon").style.display = "block";
      printOrderCart();
      demOrder();
    }

    var foodPayment = JSON.parse(localStorage.getItem("foodPayment"));
    if (foodPayment === null) {
      foodPayment = [];
      var foodPayment = [{}];
      localStorage.setItem("foodPayment", JSON.stringify(foodPayment));
    }
    console.log(account);

    function SignUp() {
      var checkUsername = 0;
      var id = idup;
      var level = 0;
      var username = document.getElementById("userSignUp").value;
      var password = document.getElementById("passSignUp").value;
      var confPass = document.getElementById("confirmPassSignUp").value;
      var role = "member";
      if (
        username != "" &&
        password != "" &&
        confPass != "" &&
        password == confPass
      ) {
        for (let i = 0; i < account.length; i++) {
          if (account[i].username == username) {

            checkUsername = 1;
            break;
          }
        }
        if (checkUsername == 0) {
          accountSignup = { id, username, password, level, role };
          account.push(accountSignup);

          localStorage.setItem("account", JSON.stringify(account));

          checkLogin = id;
          localStorage.setItem("checkLogin", JSON.stringify(checkLogin));

          var id = idup++;
          localStorage.setItem("idup", JSON.stringify(idup));
          console.log(account);
          document.getElementById("signUpStatus").innerHTML = "Successfuly Sign Up";
          document.getElementById("menuAccountLogin").innerHTML = username;
          document.getElementById("menuAccountLogin").style.display = "block";
          document.getElementById("menuLoginBtn").style.display = "none";
          document.getElementById("helloUser").innerHTML =
            "Hello " + username + " !";
          document.getElementById("menuLogout").style.display = "block";
          location.reload();
        } else {
          document.getElementById("signUpStatus").innerHTML =
            "This account has already existed";
        }
      } else {
        document.getElementById("signUpStatus").innerHTML =
          "Please enter your full information";
      }
    }

    function Login() {
      for (i = 0; i < account.length; i++) {
        if (account[i].id == i) {
          if (
            document.getElementById("userLogin").value == account[i].username &&
            document.getElementById("passLogin").value == account[i].password
          ) {
            checkLogin = account[i].id;
            localStorage.setItem("checkLogin", JSON.stringify(checkLogin));

            if (account[i].level == 0) {
              document.getElementById("loginStatus").innerHTML =
                "Logged in successfully";
              document.getElementById("menuAccountLogin").innerHTML =
                account[i].username;
              document.getElementById("menuAccountLogin").style.display = "block";
              document.getElementById("menuLoginBtn").style.display = "none";
              document.getElementById("helloUser").innerHTML =
                "Hello " + account[i].username + " !";
              document.getElementById("menuLogout").style.display = "block";
              document.getElementById("quanlydon").style.display = "none";
              printOrderCart();
              demOrder();
              location.reload();
            } else if (account[i].level == 1) {

              document.getElementById("loginStatus").innerHTML =
                "Logged in successfully";
              document.getElementById("menuAccountLogin").innerHTML =
                account[i].username;
              document.getElementById("menuAccountLogin").style.display = "block";
              document.getElementById("menuLoginBtn").style.display = "none";
              document.getElementById("helloUser").innerHTML =
                "Hello " + account[i].username + " !";
              document.getElementById("menuLogout").style.display = "block";
              document.getElementById("quanlydon").style.display = "block";
              printOrderCart();
              demOrder();
              location.reload();
            }
          }
        } else {
          if (
            document.getElementById("userLogin").value == account[i].username &&
            document.getElementById("passLogin").value == account[i].password
          ) {
            checkLogin = (account[i].id)-1;
            localStorage.setItem("checkLogin", JSON.stringify(checkLogin));

            if (account[i].level == 0) {
              document.getElementById("loginStatus").innerHTML =
                "Logged in successfully";
              document.getElementById("menuAccountLogin").innerHTML =
                account[i].username;
              document.getElementById("menuAccountLogin").style.display = "block";
              document.getElementById("menuLoginBtn").style.display = "none";
              document.getElementById("helloUser").innerHTML =
                "Hello " + account[i].username + " !";
              document.getElementById("menuLogout").style.display = "block";
              document.getElementById("quanlydon").style.display = "none";
              printOrderCart();
              demOrder();
              location.reload();
            } else if (account[i].level == 1) {

              document.getElementById("loginStatus").innerHTML =
                "Logged in successfully";
              document.getElementById("menuAccountLogin").innerHTML =
                account[i].username;
              document.getElementById("menuAccountLogin").style.display = "block";
              document.getElementById("menuLoginBtn").style.display = "none";
              document.getElementById("helloUser").innerHTML =
                "Hello " + account[i].username + " !";
              document.getElementById("menuLogout").style.display = "block";
              document.getElementById("quanlydon").style.display = "block";
              printOrderCart();
              demOrder();
              location.reload();
            }
          }
        }
      }
      if (checkLogin == -1) {
        document.getElementById("loginStatus").innerHTML =
          "Wrong password or account";
      }
    }

    function deleteOrder(orderId) {

      for (var i = 0; i < orderFood.length; i++) {
        if (
          orderId == orderFood[i].orderId &&
          checkLogin == orderFood[i].userOrderId
        ) {
          orderFood.splice(i, 1);
          localStorage.setItem("orderFood", JSON.stringify(orderFood));
          printOrderCart();
          demOrder();
          break;
        }
      }
    }

    function totalMoney(checkLogin) {
      var totalOrder = 0;
      for (let i = 0; i < orderFood.length; i++) {
        if (checkLogin == orderFood[i].userOrderId) {
          totalOrder += orderFood[i].orderPrice * orderFood[i].orderQuantity;
        }
      }
      document.getElementById("totalMoney").innerHTML = totalOrder;
    }

    function upQuality(orderId) {
      var ok = 0;
      for (let i = 0; i < orderFood.length; i++) {
        if (
          orderId == orderFood[i].orderId &&
          checkLogin == orderFood[i].userOrderId
        ) {
          var qualityInputChange = documentElement.getElementById(
            "qualityInputChange" + i
          ).value;
          orderFood[i].orderQuantity = qualityInputChange;
          ok += orderFood[i].orderPrice * orderFood[i].orderQuantity;
          localStorage.setItem("orderFood", JSON.stringify(orderFood));
          printOrderCart();
        }
      }
    }

    document.getElementById("customerName").value = account[checkLogin].username;

    document.getElementById("customerPhone").value =
      accountInfo[checkLogin].customerPhone;
    document.getElementById("customerAddress").value =
      accountInfo[checkLogin].customerAddress;
    for (let i = 0; i < orderFood.length; i++) {
      if (accountInfo[i].accountPayment == account[checkLogin].id) {
        checkInfo = 1;
        localStorage.setItem("checkInfo", JSON.stringify(checkInfo));
      } else {
        checkInfo = 0;
        localStorage.setItem("checkInfo", JSON.stringify(checkInfo));
      }
    }

    function payment() {
      var paymentID = JSON.parse(localStorage.getItem("paymentID"));
      var customerName = document.getElementById("customerName").value;
      var customerPhone = document.getElementById("customerPhone").value;
      var customerAddress = document.getElementById("customerAddress").value;
      var status = "Waiting for confirmation";
      var totalPrice = 0;
      paymentArrPush();
      for (let i = 0; i < orderFood.length; i++) {
        if (orderFood[i].userOrderId == checkLogin) {
          totalPrice += orderFood[i].orderPrice * orderFood[i].orderQuantity;
          paymentQuantity = orderFood[i].orderQuantity;
        }
      }
      paymentAccount = account[checkLogin].id;
      paymentArr = {
        paymentID,
        paymentAccount,
        showDetailOrder,
        paymentQuantity,
        totalPrice,
        customerName,
        customerPhone,
        customerAddress,
        bank,
        status,
      };
      foodPayment.push(paymentArr);
      localStorage.setItem("foodPayment", JSON.stringify(foodPayment));
      paymentID++;
      localStorage.setItem("paymentID", JSON.stringify(paymentID));
      var checkInfo = JSON.parse(localStorage.getItem("checkInfo"));
      if (checkInfo == 0) {
        accountInfoArr = {
          paymentAccount,
          customerName,
          customerPhone,
          customerAddress,
          bank,
        };
        accountInfo.push(accountInfoArr);
        localStorage.setItem("accountInfo", JSON.stringify(accountInfo));
        checkInfo = 1;
        localStorage.setItem("checkInfo", JSON.stringify(checkInfo));
        console.log(foodPayment);
      }
      for (let i = 0; i < orderFood.length; i++) {
        if (checkLogin == orderFood[i].userOrderId) {
          orderFood.splice(i, 5);
          localStorage.setItem("orderFood", JSON.stringify(orderFood));
          location.reload();
        }
      }
    }

    function printOrder() {

      document.getElementById("orderPrint").innerHTML = "";
      for (let i = 0; i < foodPayment.length; i++) {
        if (foodPayment[i].paymentAccount == checkLogin) {
          document.getElementById("orderPrint").innerHTML +=
            foodPayment[i].showDetailOrder;
        }
      }
    }

    function checkOrder(id) {

      if (checkLogin == -1) {
        alert("Make sure to Login");
      } else {
        for (let i = 0; i < orderFood.length; i++) {
          var checkOrderValue = 0;

          if (id == orderFood[i].foodId && checkLogin == orderFood[i].userOrderId) {
            checkOrderValue = 1;
            orderFood[i].orderQuantity++;

            orderFood[i].orderQuantity;
            localStorage.setItem("orderFood", JSON.stringify(orderFood));
            printOrderCart();
          }
        }
        if (checkOrderValue == 0) {
          orderPush(id);
          printOrderCart();
        }
      }
    }

    function orderPush(id) {
      var foodPayment = JSON.parse(localStorage.getItem("foodPayment"));
      orderId = idOrderFood;
      var orderName = food[id].name;
      var orderPrice = food[id].price;
      var orderImage = food[id].image;
      var orderNote = food[id].note;
      var orderQuantity = 1;
      var userOrderId = checkLogin;
      var foodId = id;
      food_order = {
        orderId,
        orderName,
        orderPrice,
        orderImage,
        orderNote,
        orderQuantity,
        userOrderId,
        foodId,
      };
      orderFood.push(food_order);

      localStorage.setItem("orderFood", JSON.stringify(orderFood));

      console.log(food_order);
      idOrderFood++;
      localStorage.setItem("idOrderFood", JSON.stringify(idOrderFood));
      demOrder();

      printOrderCart();

      console.log(orderFood);
    }

    function demOrder() {
      var demOrder = 0;
      for (let i = 0; i < orderFood.length; i++) {
        if (checkLogin == orderFood[i].userOrderId) demOrder++;
        document.getElementById("orderNumber").innerHTML = demOrder;
      }
    }

    function printOrderCart() {

      document.getElementById("print_order_cart").innerHTML = "";
      var orderFood = JSON.parse(localStorage.getItem("orderFood"));
      totalMoney(checkLogin);
      for (let i = 0; i < orderFood.length; i++) {
        if (checkLogin == orderFood[i].userOrderId) {

          var print_order_cart =
            `<tr>
            <td><div>
                <div class="cart-img-box float-left">
                    <img src="` +
            orderFood[i].orderImage +
            `" width="100%" height="100%">
                </div>
                <div class="cart-info-box float-left pl-3">
                    <p class="mb-1 font-weight-bold" style="font-size: 115%;">` +
            orderFood[i].orderName +
            `</p>
                    <p style="font-size: 85%">` +
            orderFood[i].orderNote +
            `</p>
                </div>
            </div> </td>
            <td class="text-center"><input id="qualityInputChange` +
            i +
            `" onchange = "upQuality(` +
            orderFood[i].orderId +
            `)" class="cart-input-quality mt-2" type="number" value="` +
            orderFood[i].orderQuantity +
            `" name="" min="1" max="20" style=""> </td>
            <td class="text-center"><p class="mt-2" style="padding:5px;">` +
            orderFood[i].orderPrice * orderFood[i].orderQuantity +
            `</p></td>
            <td class="text-center"><div onclick="deleteOrder(` +
            orderFood[i].orderId +
            `)" class="cart-button-delete"><i class="fa fa-trash" aria-hidden="true" style="color: #fb9200; font-size: 180%"></i></div> </td>
        </tr>`;
          document.getElementById("print_order_cart").innerHTML += print_order_cart;
        }
      }
    }

    var showDetailOrder;
    function paymentArrPush() {
      showDetailOrder = '';
      totalMoney(checkLogin);

      for (let i = 0; i < orderFood.length; i++) {
        if (checkLogin == orderFood[i].userOrderId) {
          var pushCart =
            `<div class="cart-img-box float-left mb-2" style="width: 80px;">
                <img src="` +
            orderFood[i].orderImage +
            `" width="100% height="100%">
            </div>
            <div class="cart-info-box float-left pl-3">
                <p class="mb-1 font-weight-bold" style="font-size: 115%;">` +
            orderFood[i].orderName +
            `</p>
                <p style="font-size: 85%">` +
            orderFood[i].orderNote +
            `</p>
            </div>
            <div class="quality" style="float: right; width: 8%; height: 5%">
                <p>` +
            orderFood[i].orderQuantity +
            `</p>
                </div><div style="clear:both;"></div>`;
          showDetailOrder += pushCart;
        }
      }
    }

    function paymentPrintUser() {
      document.getElementById("printPaymentUser").innerHTML = '';

      var foodPayment = JSON.parse(localStorage.getItem('foodPayment'));
      for (let i = 0; i < foodPayment.length; i++) {
        if (checkLogin == foodPayment[i].paymentAccount) {
          var printPaymentCartUser = `<tr style="border-bottom:1px solid #ccc;">
      <td>
      <p>Recipient's name: `+ foodPayment[i].customerName + `</p>
      <p>Address: `+ foodPayment[i].customerAddress + `</p>
      <p>Phone Number: `+ foodPayment[i].customerPhone + `</p>
       <p>Bank: `+ foodPayment[i].bank + `</p>
       
      </td>
      
      <td>`+ foodPayment[i].showDetailOrder + `<div id="commentBox` + i + `"></div></td>
      <td class="text-center">`+ foodPayment[i].totalPrice + `</td>
      <td class="text-center"><button id="statusPrint`+ foodPayment[i].paymentID + `" onclick="successPayment(` + foodPayment[i].paymentID + `)" class="btn btn-warning text-white">` + foodPayment[i].status + `</button></td>
          </tr>
    <tr style="width:100%"></tr>
    `

          document.getElementById("printPaymentUser").innerHTML += printPaymentCartUser;
        }
      }

    }

    function successPayment(id) {
      for (let i = 0; i < foodPayment.length; i++) {
        if (id == foodPayment[i].paymentID) {
          foodPayment[i].status = "Received";
          localStorage.setItem("foodPayment", JSON.stringify(foodPayment));
          document.getElementById("statusPrint" + id).innerHTML = foodPayment[i].status;

          var commentBox = `<div class="p-3 pb-0" style="width: 100%;background: #ff6f47;">
              <div style="float: left;width: 50%">
              <label class=" text-white mb-3" style="width: 100%;">Write feedback</label>
              <input id="commentText`+ id + `" type="text" class="form-control text-white" id="confPassAddInput"  style="width: 100%;background: #ff8f70;border: 0;outline: none;">
              </div>
            <div class="pt-3" style="float: right;width: 50%">
              <button onclick="sendToAdmin(`+ id + `)" class="btn btn-warning float-right text-white" >To send</button>
              <p id="supportSend" class="float-right mb-0 mt-3 text-white"></p>
                </div>
               
               <div style="clear: both;"></div>
            </div>`;

          document.getElementById("commentBox" + i).innerHTML += commentBox;
          document.getElementById("idcover" + i).value = id;


        }
      }
    }

    function sendToAdmin(id) {
      var checkLogin = JSON.parse(localStorage.getItem("checkLogin"));
      var contentComment = document.getElementById("commentText" + id).value;
      idPayment = id;
      userID = checkLogin;
      commentCustomerArr = { idPayment, userID, contentComment };
      commentCustomer.push(commentCustomerArr);
      localStorage.setItem("commentCustomer", JSON.stringify(commentCustomer));
      document.getElementById("supportSend").innerHTML =
        "Send feedback successfully";
    }

    function listFood() {
      document.getElementById("printFood").innerHTML = "";
      var food = JSON.parse(localStorage.getItem("food"));
      for (let i = 0; i < food.length; i++) {
        var print =
          `<div class="col-12 col-sm-6 col-md-4 col-lg-3 p-4">
        <div class="produre-box bg-white shadow-sm">
            <div class="imageBox">
                <img src="` +
          food[i].image +
          `" width="100%" height="100%" style="">
            </div>
            <div class="info-box p-3 bg-white">
                <p class="float-left font-weight-bold mb-0" style="font-size: 115%">` +
          food[i].name +
          `</p><p class="float-right font-weight-bold mb-2" style="font-size: 115%">` +
          food[i].price +
          `</p>
                <div style="clear: both;"></div>
                
                <p style="font-size: 85%; height: 35px;">` +
          food[i].note +
          `</p>
                <div class="star-box float-left pt-2">
                    <img src="../assets/icon_star.svg" width="80%">
                </div>
                
                <div class="order-box float-right">
                    <div onclick="checkOrder(` +
          food[i].id +
          `)" class="orderButton float-right pt-2">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                    </div>
                </div>
                <div style="clear: both;"></div>
            </div>
        </div>
    </div>`;
        document.getElementById("printFood").innerHTML += print;
      }
    }

    function changePassword() {

      var account = JSON.parse(localStorage.getItem("account"));
      if (
        document.getElementById("currentPass").value ==
        account[checkLogin].password &&
        document.getElementById("newPass").value ==
        document.getElementById("confNewPass").value
      ) {
        account[checkLogin].password = document.getElementById("newPass").value;
        localStorage.setItem("account", JSON.stringify(account));
        document.getElementById("notificationChangePass").innerHTML =
          "Password changed successfully";

        setTimeout(() => location.reload(), 1000);
      } else {
        document.getElementById("notificationChangePass").innerHTML =
          "Wrong password information";
      }
    }

    function LogOut() {
      document.getElementById("menuAccountLogin").style.display = "none";
      document.getElementById("menuLoginBtn").style.display = "block";
      document.getElementById("menuLogout").style.display = "none";
      checkLogin = -1;
      localStorage.setItem("checkLogin", JSON.stringify(checkLogin));
      document.getElementById("orderNumber").innerHTML = "0";
      document.getElementById("print_order_cart").innerHTML = "";
      document.getElementById("paymentForm").style.display = "none";
      document.getElementById("checkoutForm").style.display = "block";
      document.getElementById("customerName").value = "";
      document.getElementById("customerPhone").value = "";
      document.getElementById("customerAddress").value = "";
    }
  </script>

  <script type="text/javascript">


    function onLoadAll() {
      paymentPrintUser();
      listFood();
    }
  </script>
</body>

</html>